/*ISC License. See https://github.com/richardstephens-dev/richardstephens-dev for full source and license text*/ const WELCOME_PRE_EN="Welcome! You'll find coding projects here. Keep in mind that the code isn't perfect. I learn by experimenting, and experiments only work when you know you can improve. When you see a way to improve a project, let me know!",CONTACT_P_EN="Richard Stephens\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nLondon, UK",CONTACT_H1_EN="Let's talk!",PROJECTS_TITLE_EN="Projects:",PROJECTS_TITLE_RU="Проекты:",WELCOME_PRE_RU="Добро пожаловать! Здесь вы найдете проекты программирования. Чтобы вы знали—код здесь не является идеальным. Я учусь на экспериментах, и это возможно только тогда, когда знаете, можете улучшить. Когда увидите способ улучшить проект, дайте мне знать!",CONTACT_P_RU="Ричард Стивенс\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nЛондон, Великобритания",CONTACT_H1_RU="Давайте поговорим!",texts={en:{"welcome-pre":WELCOME_PRE_EN,"projects-header":"Projects:","contact-h1":"Let's talk!","contact-p":CONTACT_P_EN},ru:{"welcome-pre":WELCOME_PRE_RU,"projects-header":"Проекты:","contact-h1":CONTACT_H1_RU,"contact-p":CONTACT_P_RU}};var localizedTexts=texts.en;function initPage(){initTheme(),initLang(),writeBlinkerText(localizedTexts["welcome-pre"],0,0,"welcome-pre"),document.getElementById("projects-header").innerHTML=localizedTexts["projects-header"],writeProjectCards()}function getCookie(e){let t=document.cookie.split("; ");for(let n=0;n<t.length;n++){let o=t[n].split("=");if(o[0]==e)return o[1]}}function initLang(){null==getCookie("lang")&&(document.cookie="lang=en"),document.documentElement.setAttribute("lang",getCookie("lang")),localizedTexts=texts[getCookie("lang")],"en"!=getCookie("lang")?document.getElementById("lang-img").src="assets/images/en.svg":document.getElementById("lang-img").src="assets/images/ru.svg"}function initTheme(){if(null==getCookie("theme")&&(document.cookie="theme=light"),"dark"==getCookie("theme"))return document.documentElement.setAttribute("theme","dark"),void(document.getElementById("theme-img").src="assets/images/light.svg");document.documentElement.setAttribute("theme","light"),document.getElementById("theme-img").src="assets/images/dark.svg"}async function writeProjectCards(){const e=await fetch("https://api.github.com/users/richardstephens-dev/repos").then((e=>e.json())).then((e=>JSON.stringify(e,null,2)));let t=JSON.parse(e).sort(((e,t)=>new Date(e.updated_at)-new Date(t.updated_at))),n=[];for(let e=0;e<t.length;e++)n.push(t[e].name);let o={},i={};for(let e=0;e<n.length;e++){const t=await fetch(`https://api.github.com/repos/richardstephens-dev/${n[e]}/commits?per_page=3`).then((e=>e.json())).then((e=>JSON.stringify(e,null,2))),a=await fetch(`https://api.github.com/repos/richardstephens-dev/${n[e]}/languages`).then((e=>e.json())).then((e=>JSON.stringify(e,null,2)));let c=JSON.parse(t);o[n[e]]=c;let l=JSON.parse(a);i[n[e]]=l}let a=document.getElementById("project-cards");a.innerHTML="";for(let e=0;e<Math.min(5,t.length);e++){let n="",c='<div class="langs-wrapper">';for(let i=0;i<=3;i++){let a=o[t[e].name][i];null!=a&&(n+=`\n(${a.commit.author.date.split("T")[0]}): ${a.commit.message}<br>`)}for(let n in i[t[e].name]){src=`assets/images/${n}.svg`;let e=new XMLHttpRequest;e.open("GET",src,!1),e.send(),404!=e.status&&(c+=`<img class="logo" src="${src}"/>`)}c+="</div>";let l=t[e],r=document.createElement("div");r.classList.add("card"),r.innerHTML=`\n            <a href="${l.html_url}" target="_blank">\n            <h1>${l.name.split("-").join(" ")}</h1></a>\n            <p>${l.description}\n            ${n}\n            ${c}\n            </p>\n        `,r.style.top=10*e+"px",r.style.transform=`rotate(${4*(3*Math.random()-2)}deg)`,a.appendChild(r)}let c=document.createElement("div");c.classList.add("card"),c.id="contact-card",c.innerHTML=`\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `,a.appendChild(c)}function toggleLang(){clearTimeout(writeBlinkerTextTimeout),"en"==getCookie("lang")?document.cookie="lang=ru":"ru"==getCookie("lang")&&(document.cookie="lang=en"),initLang(),document.getElementById("contact-card").innerHTML=`\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `,document.getElementById("projects-header").innerHTML=localizedTexts["projects-header"],document.getElementById("welcome-pre").innerHTML="",writeBlinkerText(localizedTexts["welcome-pre"],0,0,"welcome-pre")}function toggleTheme(){let e=document.documentElement.getAttribute("theme");"dark"==e?document.cookie="theme=light":"light"==e&&(document.cookie="theme=dark"),initTheme()}let writeBlinkerTextTimeout;function writeBlinkerText(e,t,n,o){if(t<e.length){if(n=e.substring(t,t+1).match(/\s/)&&e.substring(t-1,t).match(/[.!?]$/)?750:25,document.getElementsByClassName("blinker").length>0){var i=document.getElementsByClassName("blinker")[0];i.parentNode.removeChild(i)}var a=document.getElementById(o).innerHTML+e[t++];document.getElementById(o).innerHTML=a+"<span class='blinker'></span>",writeBlinkerTextTimeout=setTimeout((function(){writeBlinkerText(e,t,n,o)}),n)}}window.addEventListener("load",(function(){initPage()}));