/*ISC License. See https://github.com/richardstephens-dev/richardstephens-dev for full source and license text*/ const WELCOME_PRE_EN = "Welcome! You'll find projects here about languages and retro games. Keep in mind that the code isn't perfect. I learn by experimenting, and experiments only work when you know you can improve. When you see a way to improve a project, let me know!", CONTACT_P_EN = "Richard Stephens\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nLondon, UK", CONTACT_H1_EN = "Let's talk!", PROJECTS_TITLE_EN = "Projects:", PROJECTS_TITLE_RU = "Проекты:", WELCOME_PRE_RU = "Добро пожаловать! Здесь вы найдете проекты о языках и ретро-играх. Чтобы вы знали—код здесь не является идеальным. Я учусь на экспериментах, и это возможно только тогда, когда знаете, можете улучшить. Когда увидите способ улучшить проект, дайте мне знать!", CONTACT_P_RU = "Ричард Стивенс\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nЛондон, Великобритания", CONTACT_H1_RU = "Давайте поговорим!", texts = { en: { "welcome-pre": WELCOME_PRE_EN, "projects-header": "Projects:", "contact-h1": "Let's talk!", "contact-p": CONTACT_P_EN }, ru: { "welcome-pre": WELCOME_PRE_RU, "projects-header": "Проекты:", "contact-h1": CONTACT_H1_RU, "contact-p": CONTACT_P_RU } }; var localizedTexts = texts.en; function initPage() { initLang(); let e = texts[document.cookie.split("=")[1]]; writeBlinkerText(e["welcome-pre"], 0, 0, "welcome-pre"), document.getElementById("projects-header").innerHTML = e["projects-header"], writeProjectCards() } function initLang() { let e = document.cookie.split("=")[1]; null == e && (e = "en", document.cookie = "lang=en"), document.documentElement.setAttribute("lang", e), document.getElementById("lang-img").src = "en" == e ? "assets/images/ru.svg" : "assets/images/en.svg" } async function writeProjectCards() { const e = await fetch("https://api.github.com/users/richardstephens-dev/repos").then((e => e.json())).then((e => JSON.stringify(e, null, 2))); let t = JSON.parse(e).sort(((e, t) => new Date(e.updated_at) - new Date(t.updated_at))), n = []; for (let e = 0; e < t.length; e++)n.push(t[e].name); let o = {}; for (let e = 0; e < n.length; e++) { const t = await fetch(`https://api.github.com/repos/richardstephens-dev/${n[e]}/commits?per_page=3`).then((e => e.json())).then((e => JSON.stringify(e, null, 2))); let c = JSON.parse(t); o[n[e]] = c } let c = document.getElementById("project-cards"); c.innerHTML = ""; for (let e = 0; e < Math.min(5, t.length); e++) { let n = o[t[e].name][0], a = o[t[e].name][1], i = o[t[e].name][2]; if (null == n || null == a || null == i) continue; let s = t[e], r = document.createElement("div"); r.classList.add("card"), r.innerHTML = `\n            <a href="${s.html_url}">\n            <h1>${s.name}</h1></a>\n            <p>${s.description}\n            \n(${n.commit.author.date.split("T")[0]}): ${n.commit.message}\n            \n(${a.commit.author.date.split("T")[0]}): ${a.commit.message}\n            \n(${i.commit.author.date.split("T")[0]}): ${i.commit.message}\n            </p>\n        `, r.style.top = 10 * e + "px", r.style.transform = `rotate(${4 * (3 * Math.random() - 2)}deg)`, c.appendChild(r) } let a = document.createElement("div"); a.classList.add("card"), a.id = "contact-card", a.innerHTML = `\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `, c.appendChild(a) } function toggleLang() { let e = document.documentElement.getAttribute("lang"); clearTimeout(writeBlinkerTextTimeout), "en" == e && (localizedTexts = texts.ru, document.documentElement.setAttribute("lang", "ru"), document.getElementById("lang-img").src = "assets/images/en.svg", document.cookie = "lang=ru"), "ru" == e && (localizedTexts = texts.en, document.documentElement.setAttribute("lang", "en"), document.getElementById("lang-img").src = "assets/images/ru.svg", document.cookie = "lang=en"), document.getElementById("contact-card").innerHTML = `\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `, document.getElementById("projects-header").innerHTML = localizedTexts["projects-header"], document.getElementById("welcome-pre").innerHTML = "", writeBlinkerText(localizedTexts["welcome-pre"], 0, 0, "welcome-pre") } function toggleTheme() { if ("dark" == document.documentElement.getAttribute("theme")) return document.documentElement.setAttribute("theme", "light"), void (document.getElementById("theme-img").src = "assets/images/dark.svg"); document.documentElement.setAttribute("theme", "dark"), document.getElementById("theme-img").src = "assets/images/light.svg" } let writeBlinkerTextTimeout; function writeBlinkerText(e, t, n, o) { if (t < e.length) { if (n = e.substring(t, t + 1).match(/\s/) && e.substring(t - 1, t).match(/[.!?]$/) ? 750 : 25, document.getElementsByClassName("blinker").length > 0) { var c = document.getElementsByClassName("blinker")[0]; c.parentNode.removeChild(c) } var a = document.getElementById(o).innerHTML + e[t++]; document.getElementById(o).innerHTML = a + "<span class='blinker'></span>", writeBlinkerTextTimeout = setTimeout((function () { writeBlinkerText(e, t, n, o) }), n) } } window.addEventListener("load", (function () { initPage() }));