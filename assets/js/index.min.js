/*ISC License. See https://github.com/richardstephens-dev/Personal-Website for full source and license text*/ const WELCOME_PRE_EN="Welcome! You'll find coding projects here. Keep in mind that the code isn't perfect. I learn by experimenting, and experiments only work when you know you can improve. When you see a way to improve a project, let me know!",CONTACT_P_EN="Richard Stephens\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nLondon, UK",CONTACT_H1_EN="Let's talk!",PROJECTS_TITLE_EN="Projects:",PROJECTS_TITLE_RU="Проекты:",WELCOME_PRE_RU="Добро пожаловать! Здесь вы найдете проекты программирования. Чтобы вы знали—код здесь не является идеальным. Я учусь на экспериментах, и это возможно только тогда, когда знаете, можете улучшить. Когда увидите способ улучшить проект, дайте мне знать!",CONTACT_P_RU="Ричард Стивенс\nrichard.stephens.15@ucl.ac.uk\n+44 0 7704 930 825\nЛондон, Великобритания",CONTACT_H1_RU="Давайте поговорим!",texts={en:{"welcome-pre":WELCOME_PRE_EN,"projects-header":"Projects:","contact-h1":"Let's talk!","contact-p":CONTACT_P_EN},ru:{"welcome-pre":WELCOME_PRE_RU,"projects-header":"Проекты:","contact-h1":CONTACT_H1_RU,"contact-p":CONTACT_P_RU}};var localizedTexts=texts.en;function initPage(){initTheme(),initLang(),writeBlinkerText(localizedTexts["welcome-pre"],0,0,"welcome-pre"),document.getElementById("projects-header").innerHTML=localizedTexts["projects-header"],writeProjectCards()}function getCookie(e){let t=document.cookie.split("; ");for(let n=0;n<t.length;n++){let i=t[n].split("=");if(i[0]==e)return i[1]}}function initLang(){switch(getCookie("lang")){case"en":document.documentElement.setAttribute("lang","en"),document.getElementById("lang-img").src="assets/images/ru.svg",localizedTexts=texts.en;break;case"ru":document.documentElement.setAttribute("lang","ru"),document.getElementById("lang-img").src="assets/images/en.svg",localizedTexts=texts.ru;break;default:const e=navigator.language||navigator.userLanguage;document.cookie="ru"==e?"lang=ru":"lang=en",initLang()}}function initTheme(){switch(getCookie("theme")){case"dark":document.documentElement.setAttribute("theme","dark"),document.getElementById("theme-img").src="assets/images/light.svg";break;case"light":document.documentElement.setAttribute("theme","light"),document.getElementById("theme-img").src="assets/images/dark.svg";break;default:window.matchMedia("(prefers-color-scheme: dark)").matches?document.cookie="theme=dark":document.cookie="theme=light",initTheme()}}async function writeProjectCards(){const e=await fetch("https://api.github.com/users/richardstephens-dev/repos").then((e=>e.json())).then((e=>JSON.stringify(e,null,2)));let t=JSON.parse(e).sort(((e,t)=>new Date(e.updated_at)-new Date(t.updated_at))),n=[];for(let e=0;e<t.length;e++)n.push(t[e].name);let i={},o={};for(let e=0;e<n.length;e++){const t=await fetch(`https://api.github.com/repos/richardstephens-dev/${n[e]}/commits?per_page=3`).then((e=>e.json())).then((e=>JSON.stringify(e,null,2))),a=await fetch(`https://api.github.com/repos/richardstephens-dev/${n[e]}/languages`).then((e=>e.json())).then((e=>JSON.stringify(e,null,2)));let c=JSON.parse(t);i[n[e]]=c;let r=JSON.parse(a);o[n[e]]=r}let a=document.getElementById("project-cards");a.innerHTML="";for(let e=0;e<Math.min(5,t.length);e++){let n="",c='<div class="langs-wrapper">';for(let o=0;o<=3;o++){let a=i[t[e].name][o];null!=a&&(n+=`\n(${a.commit.author.date.split("T")[0]}): ${a.commit.message}<br>`)}for(let n in o[t[e].name])c+=`<img class="logo" src="assets/images/${n}.svg"/>`;c+="</div>";let r=t[e],s=document.createElement("div");s.classList.add("card"),s.innerHTML=`\n            <a href="${r.html_url}" target="_blank">\n            <h1>${r.name.split("-").join(" ")}</h1></a>\n            <p>${r.description}\n            ${n}\n            ${c}\n            </p>\n        `,s.style.top=10*e+"px",s.style.transform=`rotate(${4*(3*Math.random()-2)}deg)`,a.appendChild(s)}let c=document.createElement("div");c.classList.add("card"),c.id="contact-card",c.innerHTML=`\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `,a.appendChild(c)}function toggleLang(){clearTimeout(writeBlinkerTextTimeout),"en"==getCookie("lang")?document.cookie="lang=ru":"ru"==getCookie("lang")&&(document.cookie="lang=en"),initLang(),document.getElementById("contact-card").innerHTML=`\n        <h1>${localizedTexts["contact-h1"]}</h1>\n        <p>${localizedTexts["contact-p"]}</p>\n    `,document.getElementById("projects-header").innerHTML=localizedTexts["projects-header"],document.getElementById("welcome-pre").innerHTML="",writeBlinkerText(localizedTexts["welcome-pre"],0,0,"welcome-pre")}function toggleTheme(){let e=document.documentElement.getAttribute("theme");"dark"==e?document.cookie="theme=light":"light"==e&&(document.cookie="theme=dark"),initTheme()}let writeBlinkerTextTimeout;function writeBlinkerText(e,t,n,i){if(t<e.length){if(n=e.substring(t,t+1).match(/\s/)&&e.substring(t-1,t).match(/[.!?]$/)?750:25,document.getElementsByClassName("blinker").length>0){var o=document.getElementsByClassName("blinker")[0];o.parentNode.removeChild(o)}var a=document.getElementById(i).innerHTML+e[t++];document.getElementById(i).innerHTML=a+"<span class='blinker'></span>",writeBlinkerTextTimeout=setTimeout((function(){writeBlinkerText(e,t,n,i)}),n)}}window.addEventListener("load",(function(){initPage()}));